---
title: "Using hockeystick"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using hockeystick}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(hockeystick)
```

## Downloading and viewing climate change data

Retrieve NOAA/ESRL Mauna Loa CO<sub>2</sub> Observatory concentration data and plot it:

```{r carbon, fig.retina=2, message=FALSE, fig.width=6, fig.height=5}
library(hockeystick)
ml_co2 <- get_carbon()
plot_carbon(ml_co2)
```

Retrieve NASA/GISS global surface temperature anomaly data and plot it:

```{r temp, fig.retina=2, fig.width=6, fig.height=5}
anomaly <- get_temp()
plot_temp(anomaly)
```

Visualize warming using Ed Hawkins styled "warming stripes":
```{r stripes, fig.retina=2, fig.width=6, fig.height=5}
warming_stripes()
```
```{r stripes2, fig.retina=2, fig.width=6, fig.height=5}
warming_stripes(stripe_only = TRUE, col_strip = viridisLite::viridis(11))
```

Retrieve tide gauge and satellite sea level data and plot it:

```{r sl, fig.retina=2, fig.width=6, fig.height=5}
gmsl <- get_sealevel()
plot_sealevel(gmsl)
```

Retrieve July annual Arctic Sea Ice Index and plot it:

```{r si, fig.retina=2, message=FALSE, fig.width=6, fig.height=5, warning=FALSE}
seaice <- get_seaice()
plot_seaice(seaice)
```

`get_seaice()` arguments can be modified to download Antarctic sea ice, and allow any month.

You can also visualize sea ice by month and year:

```{r icecurves, fig.retina=2, message=FALSE, fig.width=6, fig.height=5}
arcticice <- get_icecurves()
plot_icecurves(arcticice)
```

Retrieve Common Era temperature reconstruction and plot it with instrumental record:

```{r 2ktemp, fig.retina=2, fig.width=6, fig.height=5}
anomaly2k <- get_temp2k()
plot_temp2k(anomaly2k)
```

Retrieve Vostok ice core data and plot it:

```{r paleo, fig.retina=2, fig.width=6, fig.height=5, message=FALSE}
vostok <- get_paleo()
plot_paleo(vostok)
```

Retrieve NOAA HURDAT2 hurricane data and plot it:

```{r hurricanes, fig.retina=2, message=FALSE, fig.width=6, fig.height=5}
hurricanes <- get_hurricanes()
plot_hurricanes(hurricanes)
plot_hurricane_nrg(hurricanes)
```

### Managing the cache
By default, no climate data is cached, and all data is downloaded every time any of the `get_` functions is called. To cache data for future use, use the `write_cache = TRUE` option, available in all of the `get_` functions. To download and cache all data use `hockeystick_update_all()`. To view the files, date, and size of cached data use `hockeystick_cache_details()`.  To re-download data from the source use the `use_cache = FALSE` argument in any of the `get_` functions, for example: `get_carbon(use_cache = FALSE, write_cache = TRUE)`.  To delete all cached data use `hockeystick_cache_delete_all()`.

Users may also cache data by default by adding `options(hs_write_cache = TRUE)`to their script or `.Rprofile` file.

### All together now: climate data grid
```{r grid, fig.retina=2, warning=FALSE, fig.width=7, fig.height=6}
climate_grid()
```
